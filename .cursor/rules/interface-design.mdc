---
description: 'ARCHIVED - Moved to prototype-builder skill. Visual craft system reference.'
globs: ['elephant-ai/web/src/components/prototypes/**/*', 'prototypes/**/*']
alwaysApply: false
---

# Interface Design System (ARCHIVED)

> **Note:** This rule is archived. Design system knowledge is now in:
> - `.cursor/skills/prototype-builder/SKILL.md` - Design principles
> - `.interface-design/system.md` - Actual design tokens
> - `proto-builder` subagent - Loads design system automatically
> 
> Keeping for reference only.

Build interfaces with intention. Remember decisions across sessions. Maintain systematic consistency.

> Adapted from [interface-design](https://github.com/Dammyjay93/interface-design) for Cursor.

## Design System Loading

**CRITICAL**: Before building ANY prototype component:

1. Read `.interface-design/system.md` (AskElephant patterns)
2. **REUSE components** from `elephant-ai/web/src/components/ui/`
3. **REUSE AI elements** from `elephant-ai/web/src/components/ai-elements/`
4. Apply established patterns consistently
5. Use `cn()` utility for class merging

### On Session Start

```
‚úì Checking .interface-design/system.md...
‚úì Loaded design system:
  - Direction: [e.g., Precision & Density]
  - Spacing: [e.g., 4px base]
  - Depth: [e.g., borders-only]
  - Surfaces: [e.g., slate scale]
```

---

## Design Directions

Choose ONE direction that fits the project context:

| Direction | Feel | Best For |
|-----------|------|----------|
| **Precision & Density** | Tight, technical, monochrome | Developer tools, admin dashboards |
| **Warmth & Approachability** | Generous spacing, soft shadows | Collaborative tools, consumer apps |
| **Sophistication & Trust** | Cool tones, layered depth | Finance, enterprise B2B ‚úÖ |
| **Boldness & Clarity** | High contrast, dramatic space | Modern dashboards, data-heavy apps |
| **Utility & Function** | Muted, functional density | GitHub-style tools |
| **Data & Analysis** | Chart-optimized, numbers-first | Analytics, BI tools |

**For AskElephant**: Default to **Sophistication & Trust** (enterprise B2B SaaS).

---

## Component Reuse (CRITICAL)

**ALWAYS import existing components** before creating new ones:

### UI Components (`@/components/ui/`)

```tsx
import { Button } from '@/components/ui/button';
import { Card, CardHeader, CardContent, CardFooter, CardTitle, CardDescription } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';
import { Sheet, SheetContent, SheetHeader, SheetTitle } from '@/components/ui/sheet';
import { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Separator } from '@/components/ui/separator';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';
import { Checkbox } from '@/components/ui/checkbox';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Skeleton } from '@/components/ui/skeleton';
```

### AI Elements (`@/components/ai-elements/`)

```tsx
import { Loader } from '@/components/ai-elements/loader';
import { Confirmation } from '@/components/ai-elements/confirmation';
import { Suggestion } from '@/components/ai-elements/suggestion';
import { Sources } from '@/components/ai-elements/sources';
import { Reasoning } from '@/components/ai-elements/reasoning';
import { Panel } from '@/components/ai-elements/panel';
```

### Utilities

```tsx
import { cn } from '@/lib/utils';  // ALWAYS use for class merging
```

### Icons (lucide-react)

```tsx
import { 
  AlertCircle, AlertTriangle, Info,  // Status
  ChevronDown, ChevronUp, ChevronRight,  // Navigation
  X, Check, Plus, Minus,  // Actions
  ExternalLink, Link,  // Links
  Loader2,  // Spinner (use animate-spin)
  // etc.
} from 'lucide-react';
```

---

## Core Visual Systems

### 1. Spacing System

**ALWAYS use a consistent grid:**

```typescript
// 4px base grid (recommended)
const spacing = {
  xs: '4px',   // 1 unit
  sm: '8px',   // 2 units
  md: '12px',  // 3 units
  lg: '16px',  // 4 units
  xl: '24px',  // 6 units
  '2xl': '32px', // 8 units
};

// Tailwind equivalents
// p-1 p-2 p-3 p-4 p-6 p-8
```

**Anti-pattern**: Random values (14px, 17px, 22px...)

### 2. Depth Strategy

Choose ONE approach per project:

| Strategy | Visual | Use Case |
|----------|--------|----------|
| **Borders-only** | `border: 0.5px solid rgba(255,255,255,0.06)` | Clean, technical interfaces |
| **Soft shadows** | `shadow-sm`, `shadow-md` | Warm, approachable |
| **Layered elevation** | Multiple shadow depths | Complex hierarchy |

**Don't mix strategies** in the same prototype.

### 3. Surface Treatment

Establish a consistent background scale:

```typescript
// Dark mode (recommended for prototypes)
const surfaces = {
  base: 'hsl(222, 47%, 7%)',      // #0d1117 - deepest
  raised: 'hsl(222, 47%, 9%)',    // #161b22 - cards
  elevated: 'hsl(222, 47%, 11%)', // #21262d - popovers
  overlay: 'hsl(222, 47%, 13%)',  // #2d333b - dialogs
};

// Light mode
const surfacesLight = {
  base: 'hsl(0, 0%, 100%)',       // white
  raised: 'hsl(210, 20%, 98%)',   // subtle gray
  elevated: 'hsl(210, 20%, 96%)', // cards
  overlay: 'hsl(0, 0%, 100%)',    // dialogs with shadow
};
```

### 4. Color Foundation

```typescript
// Semantic colors (use CSS variables)
const colors = {
  // Text
  foreground: 'var(--foreground)',           // Primary text
  'foreground-muted': 'var(--muted-foreground)', // Secondary text
  
  // Accent
  primary: 'var(--primary)',                 // Brand actions
  'primary-foreground': 'var(--primary-foreground)',
  
  // States
  destructive: 'var(--destructive)',         // Delete, errors
  success: 'hsl(142, 76%, 36%)',             // Success states
  warning: 'hsl(38, 92%, 50%)',              // Warnings
  
  // Borders
  border: 'var(--border)',
  'border-subtle': 'rgba(255,255,255,0.06)', // Very subtle
};
```

---

## Component Patterns

### Before Each Component

State design choices explicitly:

```
Building: [ComponentName]
‚îú‚îÄ‚îÄ Spacing: 4px grid, 16px card padding
‚îú‚îÄ‚îÄ Depth: borders-only
‚îú‚îÄ‚îÄ Surfaces: raised (hsl 9%)
‚îú‚îÄ‚îÄ Typography: text-sm for data, text-base for labels
‚îî‚îÄ‚îÄ Interactive states: hover bg-muted/50
```

### Common Patterns to Establish

| Component | Key Decisions |
|-----------|--------------|
| **Button** | Height (32px/36px/40px), padding, radius |
| **Card** | Border style, padding, radius |
| **Input** | Height, border treatment, focus ring |
| **Badge** | Padding, font size, radius |
| **Dialog** | Width, padding, backdrop |
| **Sheet** | Width, padding, animation |

### Pattern Example

```typescript
// ‚úÖ Good: Consistent, documented decisions
const cardPattern = {
  border: '0.5px solid var(--border)',
  borderRadius: '8px',
  padding: '16px',
  background: 'var(--card)',
};

// Tailwind
// border border-border rounded-lg p-4 bg-card

// ‚ùå Bad: Arbitrary values
// className="border-[0.5px] rounded-[7px] p-[14px]"
```

---

## Design Checkpoint Flow

### Step 1: Before Building

```markdown
**Design checkpoint:**
- [ ] Loaded `.interface-design/system.md`
- [ ] Direction confirmed: [X]
- [ ] Spacing grid: [X]px base
- [ ] Depth strategy: [borders-only/shadows/elevation]
- [ ] Surface scale: [defined]
```

### Step 2: During Build

For each component, state choices before coding:

```markdown
**[ComponentName] design:**
- Layout: [flex/grid], [gap]
- Spacing: [padding], [margin]
- Depth: [border style/shadow]
- Text: [sizes]
- Interactive: [hover/focus states]
```

### Step 3: After Build

Offer to save new patterns:

```markdown
**New patterns established:**
- Button height: 36px
- Card padding: 16px
- Input height: 40px

Save to `.interface-design/system.md`? (y/n)
```

---

## Integration with Existing Rules

### With prototype-builder.mdc

1. **Load design system first** (visual craft)
2. **Then apply AI state requirements** (trust/emotion)
3. **Document in prototype-notes.md** (decisions + rationale)

### With component-patterns.mdc

- Use established spacing/depth when placing components
- Maintain consistency when promoting prototypes to production

### With design-companion.mdc

- Visual craft ‚Üí trust signals
- Polished = trustworthy (visceral design)
- Consistent patterns = predictable (behavioral design)

---

## Commands

| Command | Description |
|---------|-------------|
| `/design-system` | View/edit current design system |
| `/design-system:init` | Create new system.md with direction |
| `/design-system:audit [path]` | Check code against system |
| `/design-system:extract` | Extract patterns from existing code |

---

## AskElephant Custom Utilities

Use these layout utilities defined in the AskElephant codebase:

```tsx
// Row layouts (horizontal flex with gap-2)
'row-container'         // flex items-center justify-start gap-2 w-full
'row-container-tight'   // flex items-center justify-start gap-1 w-full
'row-container-loose'   // flex items-center justify-start gap-4 w-full
'row-container-between' // flex items-center justify-between gap-2 w-full

// Column layouts (vertical flex with gap-2)
'col-container'         // flex flex-col items-start gap-2 h-full
'col-container-tight'   // flex flex-col items-start gap-1 h-full
'col-container-loose'   // flex flex-col items-start gap-4 h-full

// Flex helpers
'flex-left'             // flex items-center justify-start
'flex-center'           // flex items-center justify-center
'flex-between'          // flex items-center justify-between
'fill-center'           // flex items-center justify-center size-full
```

---

## Anti-Patterns

üö© **Creating new components** when UI library has one - Check `@/components/ui/` first!
üö© **Not using `cn()`** - Always merge classes with `cn()` from `@/lib/utils`
üö© **Mixed depth strategies** - Pick one (borders OR shadows)
üö© **Off-grid spacing** - Stick to the 4px base grid
üö© **Arbitrary values** - `p-[14px]` instead of `p-4`
üö© **Hardcoded colors** - Use CSS variables (`text-muted-foreground`, not `text-gray-500`)
üö© **Wrong button variant** - Default is `primary-dark` (black), not blue
üö© **Session drift** - Different choices each session
üö© **No design checkpoint** - Building without stating choices first

---

## Reference System Files

Store design decisions in `.interface-design/system.md`:

```markdown
# AskElephant Design System

## Direction
Personality: Sophistication & Trust
Foundation: Cool (slate)
Context: Enterprise B2B SaaS

## Spacing
Base: 4px
Scale: 4, 8, 12, 16, 24, 32

## Depth
Strategy: borders-only
Border: 0.5px solid var(--border)
Radius scale: 4px (sm), 6px (md), 8px (lg)

## Surfaces
Dark mode: slate-950 ‚Üí slate-900 ‚Üí slate-800
Light mode: white ‚Üí slate-50 ‚Üí slate-100

## Typography
Mono data: font-mono text-xs
Labels: text-sm font-medium
Body: text-sm
Headings: text-lg font-semibold

## Component Patterns

### Button Primary
- Height: 36px
- Padding: 8px 16px
- Radius: 6px
- Font: text-sm font-medium

### Card Default
- Border: 0.5px solid var(--border)
- Padding: 16px
- Radius: 8px
- Background: var(--card)

### Input Default
- Height: 40px
- Padding: 8px 12px
- Radius: 6px
- Border: 1px solid var(--input)
```

---

## Philosophy

**Decisions compound.** A spacing value chosen once becomes a pattern. A depth strategy becomes an identity.

**Consistency beats perfection.** A coherent system with "imperfect" values beats a scattered interface with "correct" ones.

**Memory enables iteration.** When you can see what you decided and why, you can evolve intentionally instead of drifting accidentally.
